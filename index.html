<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>机库计时器</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- 视频背景 -->
    <video id="video-background" autoplay muted loop playsinline>
        <!-- 视频源将通过JavaScript动态添加 -->
    </video>
    
    <div class="container">
        <!-- Logo -->
        <div class="logo-container">
            <div class="logo" id="logo">
                <!-- Logo将通过JavaScript动态添加 -->
            </div>
        </div>
        
        <!-- 邀请码 -->
        <div class="invite-code-container" id="invite-code-container" style="display: none;">
            <a href="#" target="_blank" id="invite-link">
                <i class="fas fa-share-alt"></i>
                <span id="invite-code">123456</span>
            </a>
        </div>
        
        <!-- 通知栏 -->
        <div class="notification-bar" id="notification-bar" style="display: none;">
            <div class="notification-scroll" id="notification-scroll">
                <!-- 通知内容将通过JavaScript动态添加 -->
            </div>
        </div>
        
        <header>
            <h1 id="title">机库状态计时器</h1>
        </header>
        
        <div class="main-content">
            <!-- 计时器显示区域 -->
            <div class="timer-display">
                <div class="phase-indicator" id="phase-indicator">
                    <i class="fas fa-sync-alt"></i>
                    <span>机库已关闭等待开启中</span>
                </div>
                
                <div class="countdown" id="countdown">00:00:00</div>
                
                <div class="lights-container">
                    <div class="light red active" id="light-0"></div>
                    <div class="light red active" id="light-1"></div>
                    <div class="light red active" id="light-2"></div>
                    <div class="light red active" id="light-3"></div>
                    <div class="light red active" id="light-4"></div>
                </div>
                
                <div class="hangar-open-time" id="hangar-open-time">
                    <i class="fas fa-door-open"></i> 当前机库开启时间: 2024-01-01 00:00
                </div>
                
                <div class="calibration-time" id="calibration-time">
                    校准时间: 2024-01-01 00:00:00
                </div>
            </div>
            
            <!-- 插卡窗口信息 -->
            <div class="card-windows">
                <h2><i class="fas fa-window-restore"></i> 机库开启时间预测</h2>
                <div class="window-status">
                    基于当前计时器状态的机库开启时间预测
                </div>
                <ul class="window-list" id="window-list">
                    <!-- 窗口列表将通过JavaScript动态添加 -->
                </ul>
                <div class="info-text">
                    注意：机库开启时间会根据服务器状态动态调整，仅供参考
                </div>
                
                <div class="status-indicators">
                    <div class="status-item">
                        <div class="status-color status-red"></div>
                        <span>机库关闭</span>
                    </div>
                    <div class="status-item">
                        <div class="status-color status-green"></div>
                        <span>机库开启</span>
                    </div>
                    <div class="status-item">
                        <div class="status-color status-gray"></div>
                        <span>机库断电</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 二维码 -->
    <div class="qrcode-container">
        <div class="qrcode" id="qrcode">
            <!-- 二维码将通过JavaScript动态添加 -->
        </div>
        <div class="qrcode-caption" id="qrcode-caption">扫码加入我们</div>
    </div>
    
    <!-- 功能按钮 -->
    <button class="user-login-btn" id="user-login-btn">
        <i class="fas fa-user"></i>
        <span>用户登录</span>
    </button>
    
    <button class="feedback-btn" id="feedback-btn">
        <i class="fas fa-comment-alt"></i>
        <span>意见反馈</span>
    </button>
    
    <button class="admin-panel-btn" id="admin-panel-btn" style="display: none;">
        <i class="fas fa-cog"></i>
        <span>后台管理</span>
    </button>
    
    <button class="user-center-btn" id="user-center-btn" style="display: none;">
        <i class="fas fa-user-circle"></i>
        <span>用户中心</span>
    </button>
    
    <button class="donation-btn" id="donation-btn" style="display: none;">
        <i class="fas fa-donate"></i>
        <span>支持我们</span>
    </button>
    
    <!-- 数据库状态指示器 -->
    <div class="db-status" id="db-status">
        <i class="fas fa-database"></i>
        <span>数据库状态: 检查中...</span>
    </div>
    
    <!-- 页脚 -->
    <div class="footer">
        <div class="footer-content">
            <div class="footer-notice">
                <div class="footer-notice-scroll" id="footer-notice-scroll">
                    <!-- 页脚公告内容将通过JavaScript动态添加 -->
                </div>
            </div>
            <div class="footer-info">
                <span id="organization-name">组织名称</span>
                <span id="record-info">备案信息</span>
                <a id="project-description-btn"><i class="fas fa-info-circle"></i>项目介绍</a>
                <a id="version-btn"><i class="fas fa-code-branch"></i>版本更新</a>
                <a id="about-btn"><i class="fas fa-address-card"></i>关于我们</a>
            </div>
        </div>
    </div>
    
    <!-- 登录/注册模态框 -->
    <div class="modal" id="login-modal">
        <div class="modal-content">
            <h2><i class="fas fa-user-circle"></i> 用户登录</h2>
            
            <div class="login-tabs">
                <div class="login-tab active" data-tab="login">登录</div>
                <div class="login-tab" data-tab="register">注册</div>
                <div class="login-tab" data-tab="recover">找回密码</div>
            </div>
            
            <!-- 登录标签内容 -->
            <div class="login-tab-content active" id="login-tab">
                <div class="form-group">
                    <label for="login-username">用户名</label>
                    <input type="text" id="login-username" placeholder="请输入用户名">
                </div>
                <div class="form-group">
                    <label for="login-password">密码</label>
                    <input type="password" id="login-password" placeholder="请输入密码">
                </div>
                <div class="modal-buttons">
                    <button id="login-btn">登录</button>
                    <button class="cancel-btn" id="cancel-login">取消</button>
                </div>
            </div>
            
            <!-- 注册标签内容 -->
            <div class="login-tab-content" id="register-tab">
                <div class="form-group">
                    <label for="register-username">用户名</label>
                    <input type="text" id="register-username" placeholder="请输入用户名">
                </div>
                <div class="form-group">
                    <label for="register-password">密码</label>
                    <input type="password" id="register-password" placeholder="请输入密码（至少4位）">
                </div>
                <div class="form-group">
                    <label for="register-email">邮箱</label>
                    <input type="email" id="register-email" placeholder="请输入邮箱">
                </div>
                <div class="form-group">
                    <label for="security-question">密保问题</label>
                    <select id="security-question">
                        <option value="">请选择密保问题</option>
                        <option value="你的出生地是？">你的出生地是？</option>
                        <option value="你的第一所学校的名称是？">你的第一所学校的名称是？</option>
                        <option value="你最喜欢的电影是？">你最喜欢的电影是？</option>
                        <option value="你的宠物的名字是？">你的宠物的名字是？</option>
                        <option value="你母亲的姓氏是？">你母亲的姓氏是？</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="security-answer">密保答案</label>
                    <input type="text" id="security-answer" placeholder="请输入密保答案">
                </div>
                <div class="modal-buttons">
                    <button id="register-btn">注册</button>
                    <button class="cancel-btn" id="cancel-register">取消</button>
                </div>
            </div>
            
            <!-- 找回密码标签内容 -->
            <div class="login-tab-content" id="recover-tab">
                <div class="form-group">
                    <label for="reset-username">用户名</label>
                    <input type="text" id="reset-username" placeholder="请输入用户名">
                </div>
                <div class="form-group">
                    <label for="reset-email">邮箱</label>
                    <input type="email" id="reset-email" placeholder="请输入注册时使用的邮箱">
                </div>
                <div class="form-group">
                    <label for="reset-security-question">密保问题</label>
                    <select id="reset-security-question">
                        <option value="">请选择密保问题</option>
                        <option value="你的出生地是？">你的出生地是？</option>
                        <option value="你的第一所学校的名称是？">你的第一所学校的名称是？</option>
                        <option value="你最喜欢的电影是？">你最喜欢的电影是？</option>
                        <option value="你的宠物的名字是？">你的宠物的名字是？</option>
                        <option value="你母亲的姓氏是？">你母亲的姓氏是？</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="reset-security-answer">密保答案</label>
                    <input type="text" id="reset-security-answer" placeholder="请输入密保答案">
                </div>
                <div class="modal-buttons">
                    <button id="recover-password-btn">找回密码</button>
                    <button class="cancel-btn" id="cancel-reset">取消</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 反馈模态框 -->
    <div class="modal" id="feedback-modal">
        <div class="modal-content">
            <h2><i class="fas fa-comment-alt"></i> 意见反馈</h2>
            <div class="form-group">
                <label for="feedback-content">反馈内容</label>
                <textarea id="feedback-content" placeholder="请输入您的宝贵意见或建议..."></textarea>
            </div>
            <div class="form-group">
                <label for="feedback-contact">联系方式（选填）</label>
                <input type="text" id="feedback-contact" placeholder="邮箱、QQ或微信等">
            </div>
            <div class="modal-buttons">
                <button id="submit-feedback">提交反馈</button>
                <button class="cancel-btn" id="cancel-feedback">取消</button>
            </div>
        </div>
    </div>
    
    <!-- 后台管理面板 -->
    <div class="admin-panel" id="admin-panel">
        <div class="admin-panel-header">
            <h2><i class="fas fa-cog"></i> 后台管理系统</h2>
            <button class="close-admin-panel" id="close-admin-panel">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="admin-tabs">
            <div class="admin-tab active" data-tab="time">时间控制</div>
            <div class="admin-tab" data-tab="appearance">外观设置</div>
            <div class="admin-tab" data-tab="notification">通知管理</div>
            <div class="admin-tab" data-tab="donation">捐助设置</div>
            <div class="admin-tab" data-tab="users">用户管理</div>
            <div class="admin-tab" data-tab="feedback">反馈管理</div>
            <div class="admin-tab" data-tab="visits">访问统计</div>
            <div class="admin-tab" data-tab="data">数据管理</div>
            <div class="admin-tab" data-tab="system">系统设置</div>
        </div>
        
        <div class="admin-panel-content">
            <!-- 时间控制标签 -->
            <div class="admin-tab-content active" id="time-tab">
                <div class="admin-panel-grid">
                    <div class="admin-card">
                        <h3><i class="fas fa-clock"></i> 计时器设置</h3>
                        <div class="form-group">
                            <label for="start-time">开始时间</label>
                            <input type="datetime-local" id="start-time">
                        </div>
                        <div class="form-group">
                            <label for="initial-phase">初始阶段</label>
                            <select id="initial-phase">
                                <option value="5-red">5红 - 机库关闭</option>
                                <option value="1-green-4-red">1绿4红</option>
                                <option value="2-green-3-red">2绿3红</option>
                                <option value="3-green-2-red">3绿2红</option>
                                <option value="4-green-1-red">4绿1红</option>
                                <option value="5-green" selected>5绿 - 机库开启</option>
                                <option value="1-gray-4-green">1灰4绿</option>
                                <option value="2-gray-3-green">2灰3绿</option>
                                <option value="3-gray-2-green">3灰2绿</option>
                                <option value="4-gray-1-green">4灰1绿</option>
                                <option value="5-gray">5灰 - 机库断电</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="timer-enabled">计时器状态</label>
                            <select id="timer-enabled">
                                <option value="true">启用</option>
                                <option value="false">禁用</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="hangar-times-visible">捐助用户预测显示</label>
                            <select id="hangar-times-visible">
                                <option value="true">所有人可见</option>
                                <option value="false">仅登录用户可见</option>
                            </select>
                        </div>
                        <button id="update-timer">更新计时器</button>
                    </div>
                    
                    <div class="admin-card">
                        <h3><i class="fas fa-history"></i> 计时器状态</h3>
                        <div class="form-group">
                            <label>当前阶段</label>
                            <div id="current-phase-display">机库已关闭等待开启中</div>
                        </div>
                        <div class="form-group">
                            <label>下次机库开启</label>
                            <div id="next-hangar-open-display">计算中...</div>
                        </div>
                        <div class="form-group">
                            <label>计时器运行时间</label>
                            <div id="timer-uptime-display">计算中...</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 外观设置标签 -->
            <div class="admin-tab-content" id="appearance-tab">
                <div class="admin-panel-grid">
                    <div class="admin-card">
                        <h3><i class="fas fa-palette"></i> 主题与颜色</h3>
                        <div class="form-group">
                            <label for="custom-title">网站标题</label>
                            <input type="text" id="custom-title" placeholder="输入自定义网站标题">
                        </div>
                        <div class="form-group">
                            <label for="header-text-color">标题文字颜色</label>
                            <div style="display: flex; align-items: center;">
                                <input type="color" id="header-text-color" value="#ffffff">
                                <div class="color-preview" id="header-text-color-preview"></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="header-font-size">标题字体大小: <span id="header-font-size-value">1.8rem</span></label>
                            <input type="range" id="header-font-size" min="1" max="3" step="0.1" value="1.8">
                        </div>
                        <div class="form-group">
                            <label for="window-text-color">窗口文字颜色</label>
                            <div style="display: flex; align-items: center;">
                                <input type="color" id="window-text-color" value="#2d3748">
                                <div class="color-preview" id="window-text-color-preview"></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="window-comment-color">窗口注释颜色</label>
                            <div style="display: flex; align-items: center;">
                                <input type="color" id="window-comment-color" value="#718096">
                                <div class="color-preview" id="window-comment-color-preview"></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="window-title-color">窗口标题颜色</label>
                            <div style="display: flex; align-items: center;">
                                <input type="color" id="window-title-color" value="#2c3e50">
                                <div class="color-preview" id="window-title-color-preview"></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="calibration-text-color">校准时间颜色</label>
                            <div style="display: flex; align-items: center;">
                                <input type="color" id="calibration-text-color" value="#718096">
                                <div class="color-preview" id="calibration-text-color-preview"></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="countdown-text-color">倒计时颜色</label>
                            <div style="display: flex; align-items: center;">
                                <input type="color" id="countdown-text-color" value="#2c3e50">
                                <div class="color-preview" id="countdown-text-color-preview"></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="hangar-time-text-color">机库时间颜色</label>
                            <div style="display: flex; align-items: center;">
                                <input type="color" id="hangar-time-text-color" value="#2d3748">
                                <div class="color-preview" id="hangar-time-text-color-preview"></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="status-text-color">状态指示器颜色</label>
                            <div style="display: flex; align-items: center;">
                                <input type="color" id="status-text-color" value="#2d3748">
                                <div class="color-preview" id="status-text-color-preview"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="admin-card">
                        <h3><i class="fas fa-image"></i> Logo设置</h3>
                        <div class="form-group">
                            <label for="logo-url">Logo URL</label>
                            <input type="url" id="logo-url" placeholder="输入Logo图片URL或上传图片">
                        </div>
                        <div class="upload-group">
                            <input type="file" id="logo-upload" accept="image/*">
                            <button id="upload-logo">上传</button>
                        </div>
                        <div class="form-group">
                            <label for="logo-size">Logo大小: <span id="logo-size-value">120px</span></label>
                            <input type="range" id="logo-size" min="50" max="300" step="5" value="120">
                        </div>
                        <div class="logo-preview" id="logo-preview">
                            <span>无Logo</span>
                        </div>
                    </div>
                    
                    <div class="admin-card">
                        <h3><i class="fas fa-qrcode"></i> 二维码设置</h3>
                        <div class="form-group">
                            <label for="qrcode-url">二维码 URL</label>
                            <input type="url" id="qrcode-url" placeholder="输入二维码图片URL或上传图片">
                        </div>
                        <div class="upload-group">
                            <input type="file" id="qrcode-upload" accept="image/*">
                            <button id="upload-qrcode">上传</button>
                        </div>
                        <div class="form-group">
                            <label for="qrcode-caption-input">二维码标题</label>
                            <input type="text" id="qrcode-caption-input" placeholder="输入二维码标题">
                        </div>
                        <div class="form-group">
                            <label for="qrcode-caption-color">标题颜色</label>
                            <div style="display: flex; align-items: center;">
                                <input type="color" id="qrcode-caption-color" value="#ffffff">
                                <div class="color-preview" id="qrcode-caption-color-preview"></div>
                            </div>
                        </div>
                        <div class="qrcode-preview" id="qrcode-preview">
                            <span>无二维码</span>
                        </div>
                        <button id="delete-qrcode" style="background: var(--reset-color); margin-top: 10px;">删除二维码</button>
                    </div>
                    
                    <div class="admin-card">
                        <h3><i class="fas fa-user-plus"></i> 邀请码设置</h3>
                        <div class="form-group">
                            <label for="invite-code-input">邀请码</label>
                            <input type="text" id="invite-code-input" placeholder="输入邀请码">
                        </div>
                        <div class="form-group">
                            <label for="invite-link-input">邀请链接</label>
                            <input type="url" id="invite-link-input" placeholder="输入邀请链接">
                        </div>
                    </div>
                    
                    <div class="admin-card">
                        <h3><i class="fas fa-desktop"></i> 背景设置</h3>
                        <div class="form-group">
                            <label for="bg-type">背景类型</label>
                            <select id="bg-type">
                                <option value="image">图片背景</option>
                                <option value="video">视频背景</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="bg-image">背景图片 URL</label>
                            <input type="url" id="bg-image" placeholder="输入背景图片URL或上传图片">
                        </div>
                        <div class="upload-group">
                            <input type="file" id="bg-upload" accept="image/*">
                            <button id="upload-bg">上传</button>
                        </div>
                        <div class="form-group">
                            <label for="video-url">背景视频 URL</label>
                            <input type="url" id="video-url" placeholder="输入背景视频URL或上传视频">
                        </div>
                        <div class="upload-group">
                            <input type="file" id="video-upload" accept="video/*">
                            <button id="upload-video">上传</button>
                        </div>
                        <div class="form-group">
                            <label for="bg-opacity">背景透明度: <span id="opacity-value">80</span>%</label>
                            <input type="range" id="bg-opacity" min="10" max="100" value="80">
                        </div>
                        <div class="bg-preview" id="bg-preview">
                            <span>无背景</span>
                        </div>
                        <div class="video-preview" id="video-preview">
                            <span>视频预览区域</span>
                        </div>
                    </div>
                </div>
                
                <div class="admin-card">
                    <button id="save-appearance">保存外观设置</button>
                </div>
            </div>
            
            <!-- 通知管理标签 -->
            <div class="admin-tab-content" id="notification-tab">
                <div class="admin-panel-grid">
                    <div class="admin-card">
                        <h3><i class="fas fa-bell"></i> 通知设置</h3>
                        <div class="form-group">
                            <label for="notification-content">通知内容</label>
                            <textarea id="notification-content" placeholder="输入通知内容，留空则隐藏通知栏"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="notification-link">通知链接（可选）</label>
                            <input type="url" id="notification-link" placeholder="输入通知跳转链接">
                        </div>
                        <div class="form-group">
                            <label for="notification-color">通知文字颜色</label>
                            <div style="display: flex; align-items: center;">
                                <input type="color" id="notification-color" value="#ffffff">
                                <div class="color-preview" id="notification-color-preview"></div>
                            </div>
                        </div>
                        <button id="update-notification">更新通知</button>
                    </div>
                    
                    <div class="admin-card">
                        <h3><i class="fas fa-sticky-note"></i> 页脚信息</h3>
                        <div class="form-group">
                            <label for="footer-notice-input">页脚公告</label>
                            <input type="text" id="footer-notice-input" placeholder="输入页脚公告内容">
                        </div>
                        <div class="form-group">
                            <label for="footer-notice-link">公告链接（可选）</label>
                            <input type="url" id="footer-notice-link" placeholder="输入公告跳转链接">
                        </div>
                        <div class="form-group">
                            <label for="record-info-input">备案信息</label>
                            <input type="text" id="record-info-input" placeholder="输入备案信息">
                        </div>
                        <div class="form-group">
                            <label for="organization-name-input">组织名称</label>
                            <input type="text" id="organization-name-input" placeholder="输入组织名称">
                        </div>
                        <div class="form-group">
                            <label for="project-description-input">项目介绍</label>
                            <textarea id="project-description-input" placeholder="输入项目介绍内容"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="version-input">版本信息</label>
                            <input type="text" id="version-input" placeholder="输入版本信息">
                        </div>
                        <div class="form-group">
                            <label for="about-input">关于我们</label>
                            <textarea id="about-input" placeholder="输入关于我们的内容"></textarea>
                        </div>
                        <button id="save-footer-info">保存页脚信息</button>
                    </div>
                </div>
            </div>
            
            <!-- 捐助设置标签 -->
            <div class="admin-tab-content" id="donation-tab">
                <div class="admin-panel-grid">
                    <div class="admin-card">
                        <h3><i class="fas fa-donate"></i> 捐助功能设置</h3>
                        <div class="form-group">
                            <label for="donation-enabled">捐助功能</label>
                            <select id="donation-enabled">
                                <option value="true">启用</option>
                                <option value="false">禁用</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="donation-note">捐助注释</label>
                            <textarea id="donation-note" placeholder="输入捐助页面显示的注释文本"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="donation-btn-color">捐助按钮颜色</label>
                            <div style="display: flex; align-items: center;">
                                <input type="color" id="donation-btn-color" value="#ff6b6b">
                                <div class="color-preview" id="donation-btn-color-preview"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="admin-card">
                        <h3><i class="fab fa-weixin"></i> 微信收款码</h3>
                        <div class="form-group">
                            <label for="wechat-qrcode-url">微信收款码 URL</label>
                            <input type="url" id="wechat-qrcode-url" placeholder="输入微信收款码URL或上传图片">
                        </div>
                        <div class="upload-group">
                            <input type="file" id="wechat-qrcode-upload" accept="image/*">
                            <button id="upload-wechat-qrcode">上传</button>
                        </div>
                    </div>
                    
                    <div class="admin-card">
                        <h3><i class="fab fa-alipay"></i> 支付宝收款码</h3>
                        <div class="form-group">
                            <label for="alipay-qrcode-url">支付宝收款码 URL</label>
                            <input type="url" id="alipay-qrcode-url" placeholder="输入支付宝收款码URL或上传图片">
                        </div>
                        <div class="upload-group">
                            <input type="file" id="alipay-qrcode-upload" accept="image/*">
                            <button id="upload-alipay-qrcode">上传</button>
                        </div>
                    </div>
                </div>
                
                <div class="admin-card">
                    <button id="save-donation-settings">保存捐助设置</button>
                </div>
            </div>
            
            <!-- 用户管理标签 -->
            <div class="admin-tab-content" id="users-tab">
                <div class="admin-card">
                    <h3><i class="fas fa-users"></i> 用户列表</h3>
                    <button id="refresh-users" style="margin-bottom: 15px;">刷新列表</button>
                    <div class="user-list" id="user-list">
                        <!-- 用户列表将通过JavaScript动态添加 -->
                    </div>
                </div>
            </div>
            
            <!-- 反馈管理标签 -->
            <div class="admin-tab-content" id="feedback-tab">
                <div class="admin-card">
                    <h3><i class="fas fa-comments"></i> 用户反馈</h3>
                    <div class="feedback-list" id="feedback-list">
                        <!-- 反馈列表将通过JavaScript动态添加 -->
                    </div>
                </div>
            </div>
            
            <!-- 访问统计标签 -->
            <div class="admin-tab-content" id="visits-tab">
                <div class="admin-card">
                    <h3><i class="fas fa-chart-line"></i> 访问统计</h3>
                    <div class="visit-stats" id="visit-count">
                        总IP数: 加载中...
                    </div>
                    <div class="visits-list" id="visits-list">
                        <!-- 访问列表将通过JavaScript动态添加 -->
                    </div>
                    <div class="modal-buttons">
                        <button id="refresh-visits">刷新统计</button>
                        <button id="clear-visits" style="background: var(--reset-color);">清除记录</button>
                    </div>
                </div>
            </div>
            
            <!-- 数据管理标签 -->
            <div class="admin-tab-content" id="data-tab">
                <div class="admin-panel-grid">
                    <div class="admin-card">
                        <h3><i class="fas fa-database"></i> 令牌管理</h3>
                        <div class="token-stats">
                            <div class="token-stat-item">
                                <span>总令牌数:</span>
                                <span class="token-stat-value" id="token-total">0</span>
                            </div>
                            <div class="token-stat-item">
                                <span>活跃令牌:</span>
                                <span class="token-stat-value" id="token-active">0</span>
                            </div>
                            <div class="token-stat-item">
                                <span>过期令牌:</span>
                                <span class="token-stat-value" id="token-expired">0</span>
                            </div>
                            <div class="token-stat-item">
                                <span>自动清理间隔:</span>
                                <span class="token-stat-value" id="token-auto-clean">30 天</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="auto-clean-days">自动清理间隔（天）</label>
                            <input type="number" id="auto-clean-days" min="1" max="365" value="30">
                        </div>
                        <button id="set-auto-clean">设置自动清理</button>
                        
                        <div class="form-group">
                            <label for="token-expiration-days">令牌过期时间（天）</label>
                            <input type="number" id="token-expiration-days" min="1" max="365" value="30">
                        </div>
                        <button id="set-token-expiration">设置过期时间</button>
                        
                        <div class="modal-buttons">
                            <button id="clean-expired-tokens" style="background: #f39c12;">清理过期令牌</button>
                            <button id="clean-all-tokens" style="background: var(--reset-color);">清理所有令牌</button>
                        </div>
                    </div>
                    
                    <div class="admin-card">
                        <h3><i class="fas fa-user-shield"></i> 用户令牌统计</h3>
                        <div class="token-user-list" id="token-user-list">
                            <!-- 用户令牌统计将通过JavaScript动态添加 -->
                        </div>
                    </div>
                    
                    <div class="admin-card">
                        <h3><i class="fas fa-file-export"></i> 数据导出</h3>
                        <p>导出所有系统数据为JSON文件</p>
                        <button id="export-data">导出数据</button>
                    </div>
                    
                    <div class="admin-card">
                        <h3><i class="fas fa-trash-alt"></i> 数据重置</h3>
                        <p style="color: var(--reset-color); font-weight: bold;">警告：此操作不可逆，将删除所有数据！</p>
                        <button id="reset-data" style="background: var(--reset-color);">重置所有数据</button>
                    </div>
                </div>
            </div>
            
            <!-- 系统设置标签 -->
            <div class="admin-tab-content" id="system-tab">
                <div class="admin-panel-grid">
                    <div class="admin-card">
                        <h3><i class="fas fa-server"></i> API设置</h3>
                        <div class="form-group">
                            <label for="api-url">API地址</label>
                            <input type="url" id="api-url" placeholder="输入API服务器地址">
                        </div>
                        <button id="test-api">测试连接</button>
                        <div class="api-test-result" id="api-test-result"></div>
                    </div>
                    
                    <div class="admin-card">
                        <h3><i class="fas fa-info-circle"></i> 系统信息</h3>
                        <div class="form-group">
                            <label>当前版本</label>
                            <div>v2.0.0</div>
                        </div>
                        <div class="form-group">
                            <label>最后更新</label>
                            <div>2024-01-01</div>
                        </div>
                        <div class="form-group">
                            <label>技术支持</label>
                            <div>contact@example.com</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="modal-buttons">
            <button id="close-admin-panel-bottom">关闭管理面板</button>
        </div>
    </div>
    
    <!-- 用户中心 -->
    <div class="user-center" id="user-center">
        <div class="user-center-header">
            <h2><i class="fas fa-user-circle"></i> 用户中心</h2>
            <button class="close-user-center" id="close-user-center">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="user-center-tabs">
            <div class="user-center-tab active" data-tab="info">个人信息</div>
            <div class="user-center-tab" data-tab="security">安全设置</div>
        </div>
        
        <div class="user-center-content">
            <!-- 个人信息标签 -->
            <div class="user-center-tab-content active" id="info-tab">
                <div class="user-info-form">
                    <h3><i class="fas fa-id-card"></i> 基本信息</h3>
                    <div class="form-group">
                        <label for="user-info-username">用户名</label>
                        <input type="text" id="user-info-username" readonly>
                    </div>
                    <div class="form-group">
                        <label for="user-info-email">邮箱</label>
                        <input type="email" id="user-info-email">
                    </div>
                    <div class="form-group">
                        <label>用户角色</label>
                        <div id="user-info-role"></div>
                    </div>
                    <button id="update-user-info">更新信息</button>
                </div>
            </div>
            
            <!-- 安全设置标签 -->
            <div class="user-center-tab-content" id="security-tab">
                <div class="user-info-form">
                    <h3><i class="fas fa-shield-alt"></i> 密保设置</h3>
                    <div class="form-group">
                        <label for="user-security-question">密保问题</label>
                        <select id="user-security-question">
                            <option value="">请选择密保问题</option>
                            <option value="你的出生地是？">你的出生地是？</option>
                            <option value="你的第一所学校的名称是？">你的第一所学校的名称是？</option>
                            <option value="你最喜欢的电影是？">你最喜欢的电影是？</option>
                            <option value="你的宠物的名字是？">你的宠物的名字是？</option>
                            <option value="你母亲的姓氏是？">你母亲的姓氏是？</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="user-security-answer">密保答案</label>
                        <input type="text" id="user-security-answer" placeholder="请输入密保答案">
                    </div>
                    <button id="update-security-question">更新密保设置</button>
                </div>
                
                <div class="user-info-form">
                    <h3><i class="fas fa-key"></i> 修改密码</h3>
                    <div class="form-group">
                        <label for="change-password-old">当前密码</label>
                        <input type="password" id="change-password-old" placeholder="请输入当前密码">
                    </div>
                    <div class="form-group">
                        <label for="change-password-new">新密码</label>
                        <input type="password" id="change-password-new" placeholder="请输入新密码（至少4位）">
                    </div>
                    <div class="form-group">
                        <label for="change-password-confirm">确认新密码</label>
                        <input type="password" id="change-password-confirm" placeholder="请再次输入新密码">
                    </div>
                    <button id="change-password-btn">修改密码</button>
                </div>
            </div>
        </div>
        
        <div class="modal-buttons">
            <button id="close-user-center-bottom">关闭用户中心</button>
        </div>
    </div>
    
    <!-- 二维码模态框 -->
    <div class="qrcode-modal" id="qrcode-modal">
        <div class="qrcode-modal-content">
            <div class="qrcode-modal-img">
                <img id="qrcode-modal-img" src="" alt="QR Code">
            </div>
            <div class="qrcode-modal-caption" id="qrcode-modal-caption"></div>
            <button class="close-qrcode-modal" id="close-qrcode-modal">关闭</button>
        </div>
    </div>
    
    <!-- 捐助模态框 -->
    <div class="modal" id="donation-modal">
        <div class="donation-modal-content">
            <h2><i class="fas fa-donate"></i> 支持我们</h2>
            
            <div class="donation-note">
                <div class="donation-note-display" id="donation-note-display">
                    感谢您的支持，您的捐助将帮助我们持续维护和改进服务！
                </div>
            </div>
            
            <div class="donation-qrcodes">
                <div class="donation-qrcode">
                    <img id="wechat-qrcode" src="" alt="微信收款码">
                    <div>微信支付</div>
                </div>
                <div class="donation-qrcode">
                    <img id="alipay-qrcode" src="" alt="支付宝收款码">
                    <div>支付宝</div>
                </div>
            </div>
            
            <div class="modal-buttons">
                <button id="close-donation-modal">关闭</button>
            </div>
        </div>
    </div>
    
    <!-- 密码显示模态框 -->
    <div class="password-modal" id="password-modal">
        <div class="password-modal-content">
            <h2><i class="fas fa-key"></i> 找回密码</h2>
            <p>请妥善保管您的密码：</p>
            <div class="password-display" id="password-display"></div>
            <div class="password-modal-buttons">
                <button class="copy-password-btn" id="copy-password-btn">复制密码</button>
                <button class="cancel-btn" id="close-password-modal">关闭</button>
            </div>
        </div>
    </div>
    
    <!-- 用户编辑模态框 -->
    <div class="user-edit-modal" id="user-edit-modal">
        <div class="user-edit-content">
            <h2><i class="fas fa-user-edit"></i> 编辑用户</h2>
            
            <div class="form-group">
                <label for="edit-username">用户名</label>
                <input type="text" id="edit-username" readonly>
            </div>
            
            <div class="form-group">
                <label for="edit-email">邮箱</label>
                <input type="email" id="edit-email">
            </div>
            
            <div class="form-group">
                <label for="edit-role">用户角色</label>
                <select id="edit-role">
                    <option value="normal">普通用户</option>
                    <option value="admin">管理员</option>
                    <option value="super-admin" id="super-admin-option" style="display: none;">超级管理员</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="edit-password">新密码（留空不修改）</label>
                <input type="password" id="edit-password" placeholder="输入新密码（至少4位）">
            </div>
            
            <div class="form-group">
                <label for="edit-approved">审核状态</label>
                <select id="edit-approved">
                    <option value="true">已审核</option>
                    <option value="false">待审核</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="edit-frozen">账户状态</label>
                <select id="edit-frozen">
                    <option value="false">正常</option>
                    <option value="true">已冻结</option>
                </select>
            </div>
            
            <div class="edit-permissions">
                <h3>权限设置</h3>
                <div id="edit-permissions">
                    <div class="permission-group">
                        <div class="permission-item">
                            <input type="checkbox" id="permission-view-hangar-times" value="viewHangarTimes">
                            <label for="permission-view-hangar-times">查看机库开启时间预测</label>
                        </div>
                        <div class="permission-description">允许查看捐助用户专属的机库开启时间预测</div>
                    </div>
                    
                    <div class="permission-group admin-permission">
                        <div class="permission-item">
                            <input type="checkbox" id="permission-time" value="time">
                            <label for="permission-time">时间控制管理</label>
                        </div>
                        <div class="permission-description">允许修改计时器设置和阶段控制</div>
                    </div>
                    
                    <div class="permission-group admin-permission">
                        <div class="permission-item">
                            <input type="checkbox" id="permission-appearance" value="appearance">
                            <label for="permission-appearance">外观设置管理</label>
                        </div>
                        <div class="permission-description">允许修改网站外观、Logo、颜色等设置</div>
                    </div>
                    
                    <div class="permission-group admin-permission">
                        <div class="permission-item">
                            <input type="checkbox" id="permission-notification" value="notification">
                            <label for="permission-notification">通知管理</label>
                        </div>
                        <div class="permission-description">允许管理网站通知和页脚信息</div>
                    </div>
                    
                    <div class="permission-group admin-permission">
                        <div class="permission-item">
                            <input type="checkbox" id="permission-donation" value="donation">
                            <label for="permission-donation">捐助设置管理</label>
                        </div>
                        <div class="permission-description">允许管理捐助功能和收款码设置</div>
                    </div>
                    
                    <div class="permission-group admin-permission">
                        <div class="permission-item">
                            <input type="checkbox" id="permission-users" value="users">
                            <label for="permission-users">用户管理</label>
                        </div>
                        <div class="permission-description">允许管理用户账户和权限</div>
                    </div>
                    
                    <div class="permission-group admin-permission">
                        <div class="permission-item">
                            <input type="checkbox" id="permission-feedback" value="feedback">
                            <label for="permission-feedback">反馈管理</label>
                        </div>
                        <div class="permission-description">允许查看和处理用户反馈</div>
                    </div>
                    
                    <div class="permission-group admin-permission">
                        <div class="permission-item">
                            <input type="checkbox" id="permission-visits" value="visits">
                            <label for="permission-visits">访问统计管理</label>
                        </div>
                        <div class="permission-description">允许查看访问统计和数据</div>
                    </div>
                    
                    <div class="permission-group admin-permission">
                        <div class="permission-item">
                            <input type="checkbox" id="permission-data" value="data">
                            <label for="permission-data">数据管理</label>
                        </div>
                        <div class="permission-description">允许导出、重置系统数据和管理令牌</div>
                    </div>
                    
                    <div class="permission-group admin-permission">
                        <div class="permission-item">
                            <input type="checkbox" id="permission-system" value="system">
                            <label for="permission-system">系统设置管理</label>
                        </div>
                        <div class="permission-description">允许修改系统设置和API配置</div>
                    </div>
                </div>
            </div>
            
            <div class="modal-buttons">
                <button id="save-user-edit">保存更改</button>
                <button class="cancel-btn" id="cancel-user-edit">取消</button>
            </div>
        </div>
    </div>
    
    <!-- 页脚信息模态框 -->
    <div class="footer-modal" id="footer-info-modal">
        <div class="footer-modal-content">
            <h2 id="footer-modal-title">信息标题</h2>
            <div id="footer-modal-content">
                <!-- 内容将通过JavaScript动态添加 -->
            </div>
            <button class="close-footer-modal" id="close-footer-modal">关闭</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
